# ğŸ¯ 2å¤©å®éªŒæ‰§è¡ŒæŒ‡å—

## âœ… å½“å‰è¿›åº¦

### å·²å®Œæˆï¼š
- âœ… é¡¹ç›®ç»“æ„åˆ›å»º
- âœ… é…ç½®æ–‡ä»¶ï¼ˆexperiment_config.yamlï¼‰
- âœ… ç¯å¢ƒå˜é‡ï¼ˆ.env with API Keyï¼‰
- âœ… æ‰€æœ‰Pythonè„šæœ¬ï¼ˆDay 1 + Day 2ï¼‰
- âœ… Pythonä¾èµ–å®‰è£…ï¼ˆä½¿ç”¨Python 3.9.6ï¼‰
- â³ SpaCy æ¨¡å‹ä¸‹è½½ä¸­...

---

## ğŸ“… Day 1 æ‰§è¡Œæ¸…å•ï¼ˆé¢„è®¡4å°æ—¶ï¼‰

### âœ… ç¯å¢ƒå·²å°±ç»ª

æ‰€æœ‰ä¾èµ–å’Œè„šæœ¬å·²åˆ›å»ºå®Œæˆï¼Œä½ ç°åœ¨å¯ä»¥ï¼š

### Step 1: éªŒè¯ç¯å¢ƒï¼ˆ1åˆ†é’Ÿï¼‰

```bash
cd /Users/qitmac001395/workspace/QAL/flashRAG-Examples/apps/01-hippoRAG-evaluation

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# éªŒè¯ Python ç‰ˆæœ¬
python --version  # åº”è¯¥æ˜¾ç¤º Python 3.9.6

# éªŒè¯ä¾èµ–
python -c "import spacy, faiss, openai, networkx; print('âœ… æ‰€æœ‰ä¾èµ–æ­£å¸¸')"
```

### Step 2: ä¸‹è½½HotpotQAæ•°æ®ï¼ˆ10-20åˆ†é’Ÿï¼‰

```bash
python scripts/01_download_data.py
```

**é¢„æœŸè¾“å‡ºï¼š**
- `data/raw/hotpotqa_corpus.jsonl` (~113K æ–‡æ¡£)
- `data/raw/hotpotqa_validation.jsonl` (500 ä¸ªé—®é¢˜)

**å¯èƒ½çš„ç­‰å¾…æ—¶é—´ï¼š** é¦–æ¬¡ä¸‹è½½éœ€è¦ä» HuggingFace ä¸‹è½½ ~2.5GB æ•°æ®

### Step 3: æ„å»ºBaseline RAGï¼ˆ30-40åˆ†é’Ÿï¼‰

```bash
python scripts/02_build_baseline.py
```

**è¿™ä¸€æ­¥ä¼šåšï¼š**
1. æ–‡æ¡£åˆ†å—ï¼ˆ512 tokens/chunkï¼Œ50 overlapï¼‰
2. OpenAI Embedding API å‘é‡åŒ–ï¼ˆ~110K chunksï¼‰
3. æ„å»º FAISS IndexFlatL2 ç´¢å¼•
4. æ„å»º BM25 ç´¢å¼•

**æˆæœ¬ï¼š** ~$0.22 (ä½¿ç”¨ text-embedding-3-small)

**é¢„æœŸè¾“å‡ºï¼š**
- `data/indices/faiss/hotpotqa.index`
- `data/indices/faiss/hotpotqa_docs.pkl`
- `data/indices/bm25/hotpotqa_bm25.pkl`

### Step 4: æµ‹è¯•æ£€ç´¢ï¼ˆ1åˆ†é’Ÿï¼‰

```bash
python scripts/03_test_baseline.py
```

**é¢„æœŸï¼š** ä¼šè¿è¡Œ3ä¸ªæµ‹è¯•é—®é¢˜ï¼Œå±•ç¤º FAISS å’Œ BM25 çš„æ£€ç´¢ç»“æœ

---

## ğŸ“… Day 2 æ‰§è¡Œæ¸…å•ï¼ˆé¢„è®¡8å°æ—¶ï¼‰

### Step 5: æ„å»ºHippoRAGçŸ¥è¯†å›¾è°±ï¼ˆ20-30åˆ†é’Ÿï¼‰

```bash
python scripts/04_build_hipporag.py
```

**è¿™ä¸€æ­¥ä¼šåšï¼š**
1. é‡‡æ · 30% çš„æ–‡æ¡£å—ï¼ˆ~33K chunksï¼‰
2. SpaCy å®ä½“è¯†åˆ«ï¼ˆNERï¼‰
3. SpaCy ä¾å­˜å¥æ³•å…³ç³»æŠ½å–ï¼ˆREï¼‰
4. æ„å»º NetworkX å›¾è°±
5. è®¡ç®— Personalized PageRank

**æˆæœ¬ï¼š** ~$0ï¼ˆçº¯æœ¬åœ°è®¡ç®—ï¼Œä¸è°ƒç”¨ LLMï¼‰

**é¢„æœŸè¾“å‡ºï¼š**
- `data/knowledge_graphs/hotpotqa_kg.gpickle`
- `data/knowledge_graphs/hotpotqa_pagerank.pkl`

### Step 6: è¿è¡Œå¯¹æ¯”å®éªŒï¼ˆ10-15åˆ†é’Ÿï¼‰

```bash
python scripts/05_run_experiments.py
```

**å®éªŒç»„ï¼š**
1. **Baseline-RAG** - FAISS Dense Retrieval
2. **HippoRAG** - KG + PPR Reranking

**å¤„ç†ï¼š** 500 ä¸ªéªŒè¯é›†é—®é¢˜ Ã— 2 ç»„ = 1,000 æ¬¡ LLM è°ƒç”¨

**æˆæœ¬ï¼š** ~$4.35

**é¢„æœŸè¾“å‡ºï¼š**
- `results/baseline/predictions.json`
- `results/hipporag/predictions.json`

### Step 7: ç”Ÿæˆè¯„ä¼°æŠ¥å‘Šï¼ˆ2åˆ†é’Ÿï¼‰

```bash
python scripts/06_generate_report.py
```

**é¢„æœŸè¾“å‡ºï¼š**
- `results/evaluation_metrics.json` - è¯¦ç»†æŒ‡æ ‡ï¼ˆF1, EM, Latencyç­‰ï¼‰
- `results/comparison_table.md` - å¯¹æ¯”è¡¨æ ¼

---

## ğŸš€ ä¸€é”®è¿è¡Œï¼ˆæ¨èï¼‰

å¦‚æœä½ æƒ³è‡ªåŠ¨åŒ–æ‰§è¡Œï¼š

```bash
# Day 1 å…¨è‡ªåŠ¨
./run_day1.sh

# Day 2 å…¨è‡ªåŠ¨
./run_day2.sh
```

---

## ğŸ’° æˆæœ¬æ±‡æ€»ï¼ˆæ–¹æ¡ˆ1ä¼˜åŒ–ç‰ˆï¼‰

| é¡¹ç›® | æˆæœ¬ |
|------|------|
| å‘é‡åŒ–ï¼ˆtext-embedding-3-smallï¼‰ | $0.22 |
| KGæ„å»ºï¼ˆSpaCyï¼Œæ— LLMè°ƒç”¨ï¼‰ | $0.00 |
| å®éªŒè¿è¡Œï¼ˆ500é—®é¢˜ Ã— 2ç»„ï¼‰ | $4.35 |
| **æ€»è®¡** | **$4.57** |

**æ¯”åŸè®¡åˆ’ $21.70 èŠ‚çœäº† 79%ï¼**

å…³é”®ä¼˜åŒ–ï¼š
- âœ… ä½¿ç”¨ text-embedding-3-smallï¼ˆä¾¿å®œ5å€ï¼‰
- âœ… ä½¿ç”¨ SpaCy ä¾å­˜å¥æ³•ï¼ˆä¸ç”¨ LLM åšå…³ç³»æŠ½å–ï¼‰
- âœ… é‡‡æ ·30%æ–‡æ¡£å—

---

## â±ï¸ æ—¶é—´æ±‡æ€»ï¼ˆ2å¤©æ–¹æ¡ˆï¼‰

| Day | æœºå™¨æ—¶é—´ | äººå·¥æ—¶é—´ | è¯´æ˜ |
|-----|---------|---------|------|
| **Day 1** | ~40åˆ†é’Ÿ | ~1å°æ—¶ | ä¸‹è½½æ•°æ® + æ„å»ºç´¢å¼• + éªŒè¯ |
| **Day 2** | ~30åˆ†é’Ÿ | ~2å°æ—¶ | æ„å»ºKG + å®éªŒ + åˆ†æ |
| **æ€»è®¡** | ~1.2å°æ—¶ | ~3å°æ—¶ | |

**è¯´æ˜ï¼š**
- æœºå™¨æ—¶é—´ï¼šå¯ä»¥æŒ‚åå°ï¼Œåšå…¶ä»–äº‹
- äººå·¥æ—¶é—´ï¼šéœ€è¦ç›‘æ§ã€éªŒè¯å’Œåˆ†æç»“æœ

---

## ğŸ‰ å®Œæˆåä½ ä¼šå¾—åˆ°

1. **å®Œæ•´çš„å®éªŒä»£ç ** - å¯å¤ç”¨ã€å¯æ‰©å±•
2. **è¯„ä¼°æŠ¥å‘Š** - F1, EM, Latency å¯¹æ¯”
3. **çŸ¥è¯†å›¾è°±** - å¯è§†åŒ–å’Œæ¢ç´¢
4. **éªŒè¯ç»“è®º** - HippoRAG æ˜¯å¦æœ‰æ•ˆ

**å¦‚æœç»“æœå¥½ï¼š** å¯ä»¥æ‰©å±•åˆ°å…¶ä»–6ä¸ªæ•°æ®é›†
**å¦‚æœç»“æœä¸ç†æƒ³ï¼š** è°ƒæ•´å‚æ•°æˆ–æ–¹æ³•ï¼Œå¿«é€Ÿè¿­ä»£

---

## ğŸ“ å½“å‰çŠ¶æ€

**ä½ å¯ä»¥ç«‹å³å¼€å§‹ï¼š**

```bash
# æ¿€æ´»ç¯å¢ƒ
source venv/bin/activate

# å¼€å§‹ Day 1
./run_day1.sh
```

æˆ–è€…åˆ†æ­¥æ‰§è¡Œï¼š

```bash
python scripts/01_download_data.py
python scripts/02_build_baseline.py
python scripts/03_test_baseline.py
```

---

## ğŸ”¥ åŠ é€Ÿæç¤º

1. **å¹¶è¡Œè¿è¡Œï¼š** å®éªŒè„šæœ¬æ”¯æŒå¹¶å‘ API è°ƒç”¨ï¼ˆ10å€åŠ é€Ÿï¼‰
2. **å¢é‡å®éªŒï¼š** ç´¢å¼•æ„å»ºä¸€æ¬¡ï¼Œå¯ä»¥å¤šæ¬¡è¿è¡Œå®éªŒ
3. **å¿«é€ŸéªŒè¯ï¼š** å…ˆç”¨ 50 ä¸ªé—®é¢˜æµ‹è¯•ï¼Œç¡®è®¤å¯è¡Œåå†è·‘ 500 ä¸ª

---

å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘çŸ¥é“å¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜ï¼
